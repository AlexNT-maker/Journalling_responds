<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset ="UTF-8">
        <title>AI Journal</title>
     <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&display=swap" rel="stylesheet">
     <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
     <link rel="stylesheet" href="{{ url_for('static', filename='sparkle.css') }}">

    </head>

    <!--The main appearance is light-mode-->
<body class="light-mode">
    <nav class="navbar"> 

        <!--Left side: Title and links-->
        <div class="nav-left">
            <h1 class="logo">AI Journal</h1>
            <a href="/" class="nav-link">Home</a>
            <a href="/journal" class="nav-link">Journal</a>
            <a href="/insights" class="nav-link">Insights</a>
        </div>

        <!--Right side: toggle switch-->
        <div class="nav-right">
            <!-- Toggle Switch -->
            <label class="theme-switch">
  <input type="checkbox" class="theme-switch__checkbox" onchange="toggleTheme()">
  <div class="theme-switch__container">
    <div class="theme-switch__clouds"></div>
    <div class="theme-switch__stars-container">
      ðŸŒŸ
    </div>
    <div class="theme-switch__circle-container">
      <div class="theme-switch__sun-moon-container">
        <div class="theme-switch__moon">
          <div class="theme-switch__spot"></div>
          <div class="theme-switch__spot"></div>
          <div class="theme-switch__spot"></div>
        </div>
      </div>
    </div>
  </div>
</label>


        </div>
    </nav>

    <!--Here will take place the dynamic content of each page-->
    <div class="main-content">
        {% block content %}
        {% endblock %}
    </div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const body = document.body;
        const toggle = document.querySelector('.theme-switch__checkbox');

        // 1. Î•Ï†Î¬ÏÎ¼Î¿ÏƒÎµ Ï„Î¿ Î±Ï€Î¿Î¸Î·ÎºÎµÏ…Î¼Î­Î½Î¿ theme
        const savedTheme = localStorage.getItem("theme");
        if (savedTheme === "dark") {
            body.classList.add("dark-mode");
            body.classList.remove("light-mode");
            toggle.checked = true;
        } else {
            body.classList.add("light-mode");
            body.classList.remove("dark-mode");
            toggle.checked = false;
        }

        // 2. Î‘Î»Î»Î±Î³Î® theme Î¼Îµ toggle
        toggle.addEventListener("change", function () {
            if (toggle.checked) {
                body.classList.add("dark-mode");
                body.classList.remove("light-mode");
                localStorage.setItem("theme", "dark");
            } else {
                body.classList.add("light-mode");
                body.classList.remove("dark-mode");
                localStorage.setItem("theme", "light");
            }
        });

        // 3. Î£ÎºÎ·Î½Î¹ÎºÎ¬ Î¼Îµ particles
        const RANDOM = (min, max) => Math.floor(Math.random() * (max - min + 1) + min);
        const PARTICLES = document.querySelectorAll('.particle');
        PARTICLES.forEach(P => {
            P.setAttribute('style', `
                --x: ${RANDOM(20, 80)};
                --y: ${RANDOM(20, 80)};
                --duration: ${RANDOM(6, 20)};
                --delay: ${RANDOM(1, 10)};
                --alpha: ${RANDOM(40, 90) / 100};
                --origin-x: ${Math.random() > 0.5 ? RANDOM(300, 800) * -1 : RANDOM(300, 800)}%;
                --origin-y: ${Math.random() > 0.5 ? RANDOM(300, 800) * -1 : RANDOM(300, 800)}%;
                --size: ${RANDOM(40, 90) / 100};
            `);
        });
    });
</script>
    

</body>
</html>